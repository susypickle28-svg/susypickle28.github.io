(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92891,e=>{"use strict";e.s(["createFlexibleHtmlRegex",()=>n,"escapeRegExp",()=>l,"extractProjectName",()=>i,"pagesToFiles",()=>c,"processAiResponse",()=>s]);var t=e.i(65880);let l=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=e=>RegExp(l(e).replace(/\s+/g,"\\s*").replace(/>\s*</g,">\\s*<").replace(/\s*>/g,"\\s*>"),"g"),s=(e,l)=>{let s,c,i=[],a=[...l],h=RegExp("".concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([^\\s]+)\\s*").concat(t.UPDATE_FILE_END.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)(?=").concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|").concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|$)"),"g");for(;null!==(s=h.exec(e));){let[,e,l]=s,c=a.findIndex(t=>t.path===e);if(-1!==c){let e=a[c].html,s=l,h=l.match(/```html\s*([\s\S]*?)\s*```/);h&&(s=h[1]);let p=0,E=!0;for(;E;){let l=s.indexOf(t.SEARCH_START,p);if(-1===l){E=!1;continue}let c=s.indexOf(t.DIVIDER,l);if(-1===c){E=!1;continue}let a=s.indexOf(t.REPLACE_END,c);if(-1===a){E=!1;continue}let h=s.substring(l+t.SEARCH_START.length,c),r=s.substring(c+t.DIVIDER.length,a);if(""===h.trim())e="".concat(r,"\n").concat(e),i.push([1,r.split("\n").length]);else{let t=n(h).exec(e);if(t){let l=t[0],n=e.substring(0,t.index).split("\n").length,s=n+r.split("\n").length-1;i.push([n,s]),e=e.replace(l,r)}}p=a+t.REPLACE_END.length}a[c].html=e}}let p=RegExp("".concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([^\\s]+)\\s*").concat(t.NEW_FILE_END.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)(?=").concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|").concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|$)"),"g");for(;null!==(c=p.exec(e));){let[,e,t]=c,l=t,n=t.match(/```html\s*([\s\S]*?)\s*```/),s=t.match(/```css\s*([\s\S]*?)\s*```/),i=t.match(/```javascript\s*([\s\S]*?)\s*```/);n?l=n[1]:s?l=s[1]:i&&(l=i[1]);let h=a.findIndex(t=>t.path===e);-1!==h?a[h]={path:e,html:l.trim()}:a.push({path:e,html:l.trim()})}if(a.length===l.length&&!e.includes(t.UPDATE_FILE_START)){var E;let l=0,s=!0,c=(null==(E=a[0])?void 0:E.html)||"";for(;s;){let a=e.indexOf(t.SEARCH_START,l);if(-1===a){s=!1;continue}let h=e.indexOf(t.DIVIDER,a);if(-1===h){s=!1;continue}let p=e.indexOf(t.REPLACE_END,h);if(-1===p){s=!1;continue}let E=e.substring(a+t.SEARCH_START.length,h),r=e.substring(h+t.DIVIDER.length,p);if(""===E.trim())c="".concat(r,"\n").concat(c),i.push([1,r.split("\n").length]);else{let e=n(E).exec(c);if(e){let t=e[0],l=c.substring(0,e.index).split("\n").length,n=l+r.split("\n").length-1;i.push([l,n]),c=c.replace(t,r)}}l=p+t.REPLACE_END.length}let h=a.findIndex(e=>"/"===e.path||"/index"===e.path||"index"===e.path);-1!==h&&(a[h].html=c)}return{updatedPages:a,updatedLines:i}},c=e=>{let t=[];return e.forEach(e=>{let l="text/html";e.path.endsWith(".css")?l="text/css":e.path.endsWith(".js")?l="text/javascript":e.path.endsWith(".json")&&(l="application/json");let n=new File([e.html],e.path,{type:l});t.push(n)}),t},i=e=>{var t,l;return(null==(l=e.match(/<<<<<<< PROJECT_NAME_START\s*([\s\S]*?)\s*>>>>>>> PROJECT_NAME_END/))||null==(t=l[1])?void 0:t.trim())||null}}]);